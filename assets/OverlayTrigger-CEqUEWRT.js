import{c as ee}from"./contains-xpjwsOxO.js";import{r,p as te,u as N,j as v,c as P,t as A,P as ne}from"./index-F0uvlsHd.js";import{b as oe,u as se}from"./useWindow-m91wy-Xa.js";import{u as re,i as ae,a as $,r as ie,h as I}from"./hasClass-CJ0GaH7t.js";import{a as ce}from"./hook-BcehJP6k.js";import{u as B}from"./useMergedRefs-B_kWwTNW.js";import{u as L}from"./useCallbackRef-C_9nMhi0.js";import{u as le,g as ue,a as fe,m as de}from"./mergeOptionsWithPopperConfig-Bgqxz8md.js";import{o as me,l as he}from"./listen-DOhMskc_.js";import{u as z}from"./useEventCallback-s6m76CRA.js";import{F as K}from"./Fade-Do2bjijw.js";import{d as S}from"./TransitionWrapper-Cb4OEx4M.js";const U=2**31-1;function V(e,t,n){const o=n-Date.now();e.current=o<=U?setTimeout(t,o):setTimeout(()=>V(e,t,n),U)}function pe(){const e=oe(),t=r.useRef();return re(()=>clearTimeout(t.current)),r.useMemo(()=>{const n=()=>clearTimeout(t.current);function o(s,a=0){e()&&(n(),a<=U?t.current=setTimeout(s,a):V(t,s,Date.now()+a))}return{set:o,clear:n,handleRef:t}},[])}const ve=()=>{};function ge(e,t,{disabled:n,clickTrigger:o}={}){const s=t||ve;le(e,s,{disabled:n,clickTrigger:o});const a=z(c=>{ae(c)&&s(c)});r.useEffect(()=>{if(n||e==null)return;const c=me(ue(e));let h=(c.defaultView||window).event;const u=he(c,"keyup",d=>{if(d===h){h=void 0;return}a(d)});return()=>{u()}},[e,n,a])}const X=r.forwardRef((e,t)=>{const{flip:n,offset:o,placement:s,containerPadding:a,popperConfig:c={},transition:h,runTransition:u}=e,[d,w]=L(),[R,y]=L(),m=B(w,t),f=$(e.container),T=$(e.target),[i,p]=r.useState(!e.show),l=fe(T,d,de({placement:s,enableEvents:!!e.show,containerPadding:a||5,flip:n,offset:o,arrowElement:R,popperConfig:c}));e.show&&i&&p(!1);const x=(...b)=>{p(!0),e.onExited&&e.onExited(...b)},E=e.show||!i;if(ge(d,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!E)return null;const{onExit:F,onExiting:C,onEnter:O,onEntering:_,onEntered:M}=e;let D=e.children(Object.assign({},l.attributes.popper,{style:l.styles.popper,ref:m}),{popper:l,placement:s,show:!!e.show,arrowProps:Object.assign({},l.attributes.arrow,{style:l.styles.arrow,ref:y})});return D=ie(h,u,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:D,onExit:F,onExiting:C,onExited:x,onEnter:O,onEntering:_,onEntered:M}),f?te.createPortal(D,f):null});X.displayName="Overlay";const Y=r.forwardRef(({className:e,bsPrefix:t,as:n="div",...o},s)=>(t=N(t,"popover-header"),v.jsx(n,{ref:s,className:P(e,t),...o})));Y.displayName="PopoverHeader";const H=r.forwardRef(({className:e,bsPrefix:t,as:n="div",...o},s)=>(t=N(t,"popover-body"),v.jsx(n,{ref:s,className:P(e,t),...o})));H.displayName="PopoverBody";function q(e,t){let n=e;return e==="left"?n=t?"end":"start":e==="right"&&(n=t?"start":"end"),n}function G(e="absolute"){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const we=r.forwardRef(({bsPrefix:e,placement:t="right",className:n,style:o,children:s,body:a,arrowProps:c,hasDoneInitialMeasure:h,popper:u,show:d,...w},R)=>{const y=N(e,"popover"),m=A(),[f]=(t==null?void 0:t.split("-"))||[],T=q(f,m);let i=o;return d&&!h&&(i={...o,...G(u==null?void 0:u.strategy)}),v.jsxs("div",{ref:R,role:"tooltip",style:i,"x-placement":f,className:P(n,y,f&&`bs-popover-${T}`),...w,children:[v.jsx("div",{className:"popover-arrow",...c}),a?v.jsx(H,{children:s}):s]})}),Re=Object.assign(we,{Header:Y,Body:H,POPPER_OFFSET:[0,8]}),J=r.forwardRef(({bsPrefix:e,placement:t="right",className:n,style:o,children:s,arrowProps:a,hasDoneInitialMeasure:c,popper:h,show:u,...d},w)=>{e=N(e,"tooltip");const R=A(),[y]=(t==null?void 0:t.split("-"))||[],m=q(y,R);let f=o;return u&&!c&&(f={...o,...G(h==null?void 0:h.strategy)}),v.jsxs("div",{ref:w,style:f,role:"tooltip","x-placement":y,className:P(n,e,`bs-tooltip-${m}`),...d,children:[v.jsx("div",{className:"tooltip-arrow",...a}),v.jsx("div",{className:`${e}-inner`,children:s})]})});J.displayName="Tooltip";const ye=Object.assign(J,{TOOLTIP_OFFSET:[0,6]});function Ee(e){const t=r.useRef(null),n=N(void 0,"popover"),o=N(void 0,"tooltip"),s=r.useMemo(()=>({name:"offset",options:{offset:()=>{if(e)return e;if(t.current){if(I(t.current,n))return Re.POPPER_OFFSET;if(I(t.current,o))return ye.TOOLTIP_OFFSET}return[0,0]}}}),[e,n,o]);return[t,[s]]}function Oe(e,t){const{ref:n}=e,{ref:o}=t;e.ref=n.__wrapped||(n.__wrapped=s=>n(S(s))),t.ref=o.__wrapped||(o.__wrapped=s=>o(S(s)))}const Q=r.forwardRef(({children:e,transition:t=K,popperConfig:n={},rootClose:o=!1,placement:s="top",show:a=!1,...c},h)=>{const u=r.useRef({}),[d,w]=r.useState(null),[R,y]=Ee(c.offset),m=B(h,R),f=t===!0?K:t||void 0,T=z(i=>{w(i),n==null||n.onFirstUpdate==null||n.onFirstUpdate(i)});return se(()=>{d&&c.target&&(u.current.scheduleUpdate==null||u.current.scheduleUpdate())},[d,c.target]),r.useEffect(()=>{a||w(null)},[a]),v.jsx(X,{...c,ref:m,popperConfig:{...n,modifiers:y.concat(n.modifiers||[]),onFirstUpdate:T},transition:f,rootClose:o,placement:s,show:a,children:(i,{arrowProps:p,popper:l,show:x})=>{var E;Oe(i,p);const F=l==null?void 0:l.placement,C=Object.assign(u.current,{state:l==null?void 0:l.state,scheduleUpdate:l==null?void 0:l.update,placement:F,outOfBoundaries:(l==null||(E=l.state)==null||(E=E.modifiersData.hide)==null?void 0:E.isReferenceHidden)||!1,strategy:n.strategy}),O=!!d;return typeof e=="function"?e({...i,placement:F,show:x,...!t&&x&&{className:"show"},popper:C,arrowProps:p,hasDoneInitialMeasure:O}):r.cloneElement(e,{...i,placement:F,arrowProps:p,popper:C,hasDoneInitialMeasure:O,className:P(e.props.className,!t&&x&&"show"),style:{...e.props.style,...i.style}})}})});Q.displayName="Overlay";function Te(e){return e&&typeof e=="object"?e:{show:e,hide:e}}function W(e,t,n){const[o]=t,s=o.currentTarget,a=o.relatedTarget||o.nativeEvent[n];(!a||a!==s)&&!ee(s,a)&&e(...t)}ne.oneOf(["click","hover","focus"]);const Ue=({trigger:e=["hover","focus"],overlay:t,children:n,popperConfig:o={},show:s,defaultShow:a=!1,onToggle:c,delay:h,placement:u,flip:d=u&&u.indexOf("auto")!==-1,...w})=>{const R=r.useRef(null),y=B(R,n.ref),m=pe(),f=r.useRef(""),[T,i]=ce(s,a,c),p=Te(h),{onFocus:l,onBlur:x,onClick:E}=typeof n!="function"?r.Children.only(n).props:{},F=g=>{y(S(g))},C=r.useCallback(()=>{if(m.clear(),f.current="show",!p.show){i(!0);return}m.set(()=>{f.current==="show"&&i(!0)},p.show)},[p.show,i,m]),O=r.useCallback(()=>{if(m.clear(),f.current="hide",!p.hide){i(!1);return}m.set(()=>{f.current==="hide"&&i(!1)},p.hide)},[p.hide,i,m]),_=r.useCallback((...g)=>{C(),l==null||l(...g)},[C,l]),M=r.useCallback((...g)=>{O(),x==null||x(...g)},[O,x]),D=r.useCallback((...g)=>{i(!T),E==null||E(...g)},[E,i,T]),b=r.useCallback((...g)=>{W(C,g,"fromElement")},[C]),Z=r.useCallback((...g)=>{W(O,g,"toElement")},[O]),j=e==null?[]:[].concat(e),k={ref:F};return j.indexOf("click")!==-1&&(k.onClick=D),j.indexOf("focus")!==-1&&(k.onFocus=_,k.onBlur=M),j.indexOf("hover")!==-1&&(k.onMouseOver=b,k.onMouseOut=Z),v.jsxs(v.Fragment,{children:[typeof n=="function"?n(k):r.cloneElement(n,k),v.jsx(Q,{...w,show:T,onHide:O,flip:d,placement:u,popperConfig:o,target:R.current,children:t})]})};export{Ue as O,Re as P,ye as T};
