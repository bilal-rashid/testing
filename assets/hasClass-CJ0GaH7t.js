import{r as o,j as m}from"./index-F0uvlsHd.js";import{c as w,o as W}from"./listen-DOhMskc_.js";import{a as S,u as p}from"./useWindow-m91wy-Xa.js";import{u as j}from"./useMergedRefs-B_kWwTNW.js";import{u as U}from"./useEventCallback-s6m76CRA.js";import{N as D}from"./NoopTransition-DmAqiXSQ.js";function I(n){const e=o.useRef(n);return e.current=n,e}function Q(n){const e=I(n);o.useEffect(()=>()=>e.current(),[])}const h=(n,e)=>w?n==null?(e||W()).body:(typeof n=="function"&&(n=n()),n&&"current"in n&&(n=n.current),n&&("nodeType"in n||n.getBoundingClientRect)?n:null):null;function X(n,e){const t=S(),[i,s]=o.useState(()=>h(n,t==null?void 0:t.document));if(!i){const r=h(n);r&&s(r)}return o.useEffect(()=>{},[e,i]),o.useEffect(()=>{const r=h(n);r!==i&&s(r)},[n,i]),i}function Y(n){return n.code==="Escape"||n.keyCode===27}function K(){const n=o.version.split(".");return{major:+n[0],minor:+n[1],patch:+n[2]}}const M=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function F(n,e){if(n==null)return{};var t={},i=Object.keys(n),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function G(n){let{onEnter:e,onEntering:t,onEntered:i,onExit:s,onExiting:r,onExited:a,addEndListener:f,children:c}=n,u=F(n,M);const{major:x}=K(),R=x>=19?c.props.ref:c.ref,d=o.useRef(null),b=j(d,typeof c=="function"?null:R),l=E=>g=>{E&&d.current&&E(d.current,g)},v=o.useCallback(l(e),[e]),y=o.useCallback(l(t),[t]),C=o.useCallback(l(i),[i]),O=o.useCallback(l(s),[s]),k=o.useCallback(l(r),[r]),T=o.useCallback(l(a),[a]),L=o.useCallback(l(f),[f]);return Object.assign({},u,{nodeRef:d},e&&{onEnter:v},t&&{onEntering:y},i&&{onEntered:C},s&&{onExit:O},r&&{onExiting:k},a&&{onExited:T},f&&{addEndListener:L},{children:typeof c=="function"?(E,g)=>c(E,Object.assign({},g,{ref:b})):o.cloneElement(c,{ref:b})})}const N=["component"];function V(n,e){if(n==null)return{};var t={},i=Object.keys(n),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}const _=o.forwardRef((n,e)=>{let{component:t}=n,i=V(n,N);const s=G(i);return m.jsx(t,Object.assign({ref:e},s))});function $({in:n,onTransition:e}){const t=o.useRef(null),i=o.useRef(!0),s=U(e);return p(()=>{if(!t.current)return;let r=!1;return s({in:n,element:t.current,initial:i.current,isStale:()=>r}),()=>{r=!0}},[n,s]),p(()=>(i.current=!1,()=>{i.current=!0}),[]),t}function z({children:n,in:e,onExited:t,onEntered:i,transition:s}){const[r,a]=o.useState(!e);e&&r&&a(!1);const f=$({in:!!e,onTransition:u=>{const x=()=>{u.isStale()||(u.in?i==null||i(u.element,u.initial):(a(!0),t==null||t(u.element)))};Promise.resolve(s(u)).then(x,R=>{throw u.in||a(!0),R})}}),c=j(f,n.ref);return r&&!e?null:o.cloneElement(n,{ref:c})}function Z(n,e,t){return n?m.jsx(_,Object.assign({},t,{component:n})):e?m.jsx(z,Object.assign({},t,{transition:e})):m.jsx(D,Object.assign({},t))}function nn(n,e){return n.classList?!!e&&n.classList.contains(e):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+e+" ")!==-1}export{X as a,nn as h,Y as i,Z as r,Q as u};
