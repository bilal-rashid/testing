import{o as A,d as F,a as B,r as d,j as e,Q as y,R as Q,b as O}from"./index-F0uvlsHd.js";import{u as W}from"./index.esm-D7_iMr1k.js";import{F as f}from"./FormInput-BqRBY1DN.js";import"./world-J20cQgd_.js";import{D as G,S as D}from"./SelectInput-QfbJWPyL.js";import{L as J}from"./LoadingButton-B6IRlRGW.js";import{M as X,u as E,g as Z}from"./index-BB-SF9mV.js";import{h as q}from"./moment-C5S46NFB.js";import{R as w}from"./Row-9hTZkyBg.js";import{C as c}from"./Col-CeeRnQxB.js";import{B as M}from"./Button-DEBuu1m2.js";import{O as L,T as V}from"./OverlayTrigger-CEqUEWRT.js";import{T as _,S as $}from"./TableFilters-C726Ijqr.js";import{P as ee}from"./PageLayout-Cd-4jQXh.js";import{C as Y}from"./Card-Cmn7cKYw.js";import"./Form-CTfXWlVo.js";import"./ElementChildren-DaDnB9c6.js";import"./InputGroupContext-C-h8jlw8.js";import"./setPrototypeOf-DgZC2w_0.js";import"./warning-BsyeZTUT.js";import"./clsx-B-dksMZM.js";import"./Modal-C5mqPxj_.js";import"./listen-DOhMskc_.js";import"./useCallbackRef-C_9nMhi0.js";import"./useEventCallback-s6m76CRA.js";import"./useMergedRefs-B_kWwTNW.js";import"./hasClass-CJ0GaH7t.js";import"./useWindow-m91wy-Xa.js";import"./NoopTransition-DmAqiXSQ.js";import"./TransitionWrapper-Cb4OEx4M.js";import"./objectWithoutPropertiesLoose-CAYKN5F1.js";import"./AbstractModalHeader-fWu4g0rU.js";import"./contains-xpjwsOxO.js";import"./usePrevious-gswdWBZu.js";import"./DataKey-COGXBUcQ.js";import"./CloseButton-BKCUVlX4.js";import"./Fade-Do2bjijw.js";import"./divWithClassName-B4nvZjDC.js";import"./Button-DEBg3Qkk.js";import"./hook-BcehJP6k.js";import"./extends-CF3RwP-h.js";import"./mergeOptionsWithPopperConfig-Bgqxz8md.js";import"./simplebar-react.esm-Cne10Fc6.js";import"./index-DERQo0GJ.js";import"./Stack-B2DR9NGx.js";const re=({show:S,onHide:v,paginationState:p,filteredQuery:t,sorting:h,isEdit:a=!1,data:s})=>{const[k]=F(),i=k.get("practiceId"),{providerTrackerStore:m}=B(),{createProviderTracker:T,loading:P,updateProviderTracker:j,loadproviderTrackers:R}=m,{reset:u,register:l,handleSubmit:r,control:x,formState:{isDirty:g,isValid:z,isSubmitting:I}}=W(),b=()=>{u(),v()};d.useEffect(()=>{a&&u(s)},[s]);const K=async n=>{if(n.practiceId=i,n.requestRecordDate=q(n.requestRecordDate).format("YYYY-MM-DD"),a){if(!(s!=null&&s.id))return;try{await j(n,s.id),b(),y.info("Provider Tracker Updated Successfully!"),await R({pageNumber:p.pageIndex,pageSize:p.pageSize,keyword:t,sorting:h,practiceId:i})}catch(o){const C=(o==null?void 0:o.message)||"Update provider Tracker failed";y.error(C)}}else try{await T(n),b(),y.success("Provider Tracker Added Successfully!"),await R({pageNumber:p.pageIndex,pageSize:p.pageSize,keyword:t,sorting:h,practiceId:i})}catch(o){const C=(o==null?void 0:o.message)||"Create Provider Tracker failed";y.error(C)}},N=async()=>{try{if(!(s!=null&&s.id))return;await m.deleteProviderTracker(s.id),y.error("Provider Deleted Successfully!"),await m.loadproviderTrackers({pageNumber:1,pageSize:p.pageSize,keyword:t,sorting:h,practiceId:i})}catch(n){const o=(n==null?void 0:n.message)||"Update provider failed";y.error(o)}};return e.jsx(X,{show:S,onHide:b,headerTitle:a?"Edit Provider Tracker":"Add Provider Tracker",size:"xl",children:e.jsxs("form",{onSubmit:r(K),children:[e.jsxs(w,{children:[e.jsx(c,{md:{span:4},children:e.jsx(G,{required:!0,type:"date",label:"Request Record Date",placeholder:"Request Record Date",name:"requestRecordDate",className:"form-control",control:x})}),e.jsx(c,{md:{span:4},children:e.jsxs(D,{required:!0,name:"obStatus",label:"OB Status",control:x,defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Select OB Status"}),e.jsx("option",{children:"Completed"}),e.jsx("option",{children:"Non-Responsive"}),e.jsx("option",{children:"Hold"}),e.jsx("option",{children:"Withdraw"}),e.jsx("option",{children:"Research only"})]})}),e.jsx(c,{md:{span:4},children:e.jsxs(D,{required:!0,name:"meetingStatus",label:"Meeting Status",control:x,defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Meeting Status"}),e.jsx("option",{children:"Completed"}),e.jsx("option",{children:"Scheduled"}),e.jsx("option",{children:"Re-Scheduled"})]})})]}),e.jsxs(w,{style:{marginTop:20},children:[e.jsx(c,{md:{span:4},children:e.jsxs(D,{required:!0,name:"docStatus",label:"Doc Status",control:x,defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Doc Status"}),e.jsx("option",{children:"Completed"}),e.jsx("option",{children:"In-Process"}),e.jsx("option",{children:"Pending"})]})}),e.jsx(c,{md:{span:4},children:e.jsx(f,{type:"text",label:"Missing Doc",placeholder:"Missing Doc",register:l,name:"missingDoc"})}),e.jsx(c,{md:{span:4},children:e.jsxs(D,{required:!0,name:"invoiceStatus",label:"Invoice Status",control:x,defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Invoice Status"}),e.jsx("option",{children:"Paid"}),e.jsx("option",{children:"In-Process"}),e.jsx("option",{children:"Pending"})]})})]}),e.jsxs(w,{style:{marginTop:20},children:[e.jsx(c,{md:{span:4},children:e.jsx(f,{required:!0,type:"text",label:"Cred User",placeholder:"Cred User",register:l,name:"credUser"})}),e.jsx(c,{md:{span:4},children:e.jsx(f,{required:!0,type:"text",label:"Sales Rep",placeholder:"Sales Rep",register:l,name:"salesRep",maxLength:10})}),e.jsx(c,{md:{span:4},children:e.jsx(f,{type:"text",label:"Assigned CRM ",placeholder:"Assigned CRM ",register:l,name:"assignedCRM"})})]}),e.jsxs(w,{style:{marginTop:20},children:[e.jsx(c,{md:{span:4},children:e.jsx(f,{type:"text",label:"Billing Team",placeholder:"Billing Team",register:l,name:"billingTeam"})}),e.jsx(c,{md:{span:4},children:e.jsx(f,{type:"text",label:"Remarks",placeholder:"Remarks",register:l,name:"remarks"})})]}),e.jsxs("div",{className:"d-flex w-100 my-3 gap-2",children:[a&&e.jsx(M,{variant:"danger",onClick:N,children:"Delete"}),e.jsx(M,{size:"sm",variant:"light",onClick:()=>b(),className:"ms-auto",children:"Cancel"}),e.jsx(J,{type:"submit",variant:"primary",disabled:!g||!z||I,loading:I||P,children:"Save"})]})]})})},H=A(re),U=({pagination:S,filteredQuery:v,sorting:p})=>[{header:"Sr.#",accessorKey:"index",cell:({row:t})=>t.index+1},{header:"OB Status",enableSorting:!0,accessorKey:"obStatus"},{header:"Agreement",enableSorting:!0,accessorKey:"agreement"},{header:"Initial Meeting Date",enableSorting:!0,accessorKey:"initialMeeting"},{header:"Request Record Date",enableSorting:!0,accessorKey:"requestRecordDate",cell:({row:t})=>q(t.original.requestRecordDate).format("MM/DD/YYYY")},{header:"Meeting Status",enableSorting:!0,accessorKey:"meetingStatus"},{header:"Doc Status",enableSorting:!0,accessorKey:"docStatus"},{header:"Missing Doc",enableSorting:!0,accessorKey:"missingDoc"},{header:"Invoice Status",enableSorting:!0,accessorKey:"invoiceStatus"},{header:"Invoice Amount",enableSorting:!0,accessorKey:"invoiceAmount"},{header:"Cred User",enableSorting:!0,accessorKey:"credUser"},{header:"Sales Rep",enableSorting:!0,accessorKey:"salesRep"},{header:"Assigned CRM",enableSorting:!0,accessorKey:"assignedCRM"},{header:"Billing Team",enableSorting:!0,accessorKey:"billingTeam"},{header:"Remarks",enableSorting:!0,accessorKey:"remarks"},{header:"Created Date",enableSorting:!0,accessorKey:"createdOn",cell:({row:t})=>q(t.original.createdOn).format("MM/DD/YYYY")},{header:"",accessorKey:"edit",cell:t=>{var m;const{accountStore:h}=B(),{show:a,onShow:s,onHide:k}=E(),i=T=>e.jsx(V,{id:"button-tooltip",className:"font-14",...T,children:"Basic user cannot use this feature"});return e.jsxs(Q.Fragment,{children:[((m=h.currentUser)==null?void 0:m.roleId)!==O.basic?e.jsx("button",{className:"btn btn-soft-primary rounded-pill",onClick:s,children:"Edit"}):e.jsx(L,{placement:"bottom-start",delay:{show:250,hide:400},overlay:i,children:e.jsx("button",{className:"btn btn-soft-primary rounded-pill","aria-readonly":"true",children:"Edit"})}),a&&e.jsx(H,{isEdit:!0,show:a,onHide:k,data:t.row.original,paginationState:{pageIndex:S.pageIndex+1,pageSize:S.pageSize},filteredQuery:v,sorting:p})]})}}],te=()=>{var o;const{providerTrackerStore:S,accountStore:v,layoutStore:p}=B(),{loadproviderTrackers:t,providerTrackers:h,providerTrackerMetaData:a,loadingInitial:s}=S,[k]=F(),i=k.get("practiceId"),{show:m,onShow:T,onHide:P}=E(),[j,R]=d.useState(""),[u,l]=d.useState(""),[r,x]=d.useState({pageIndex:0,pageSize:p.pageSize}),[g,z]=d.useState([]),I=d.useMemo(()=>h,[h]),b=d.useMemo(()=>U({pagination:r,filteredQuery:u,sorting:g}),[U,r,u,g]),K=d.useCallback(()=>{R(""),l(j),t({pageNumber:r.pageIndex+1,pageSize:r.pageSize,keyword:j,practiceId:i})},[r,j]),N=d.useCallback(()=>{l(""),t({pageNumber:r.pageIndex+1,pageSize:r.pageSize,practiceId:i})},[r]),n=C=>e.jsx(V,{id:"button-tooltip",className:"font-14",...C,children:"Basic user cannot use this feature"});return d.useEffect(()=>{t({pageNumber:r.pageIndex+1,pageSize:r.pageSize,keyword:u,sorting:g,practiceId:i})},[t,r.pageSize,r.pageIndex,u,g,i]),e.jsx(ee,{title:"Provider Trackers",action:((o=v.currentUser)==null?void 0:o.roleId)!==O.basic?e.jsx(M,{variant:"primary",onClick:T,children:"New Provider Tracker"}):e.jsx(L,{placement:"bottom-start",delay:{show:250,hide:400},overlay:n,children:e.jsx("span",{children:e.jsx(M,{disabled:!0,variant:"primary",children:"New Provider Tracker"})})}),children:e.jsx(Y,{className:"pt-2",children:e.jsxs(Y.Body,{children:[e.jsx(_,{searchInputPlaceholder:"Search...",handleClearFilters:N,searchQuery:j,setSearchQuery:R,filteredQuery:u,setFilteredQuery:l,handleFilter:K}),m&&e.jsx(H,{show:m,onHide:P,isEdit:!1,paginationState:{pageIndex:r.pageIndex+1,pageSize:r.pageSize},filteredQuery:u,sorting:g}),e.jsx($,{data:I||[],columns:b,getCoreRowModel:Z(),sorting:g,setSorting:z,pagination:r,setPagination:x,pageCount:(a==null?void 0:a.totalPages)??0,totalCount:(a==null?void 0:a.totalCount)??0,isLoading:s})]})})})},Ge=A(te);export{Ge as default};
