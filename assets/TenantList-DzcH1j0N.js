import{o as C,a as w,r as x,j as e,Q as b}from"./index-F0uvlsHd.js";import{c as P}from"./clsx-B-dksMZM.js";import{u as q,M as $,g as O}from"./index-BB-SF9mV.js";import{c as K,a as o,b as I}from"./object-DkfBSX30.js";import{u as L}from"./index.esm-D7_iMr1k.js";import{o as R}from"./yup-T7nDE8GX.js";import{F as m}from"./FormInput-BqRBY1DN.js";import"./world-J20cQgd_.js";import{L as k}from"./LoadingButton-B6IRlRGW.js";import{M as N}from"./Modal-C5mqPxj_.js";import{R as B}from"./Row-9hTZkyBg.js";import{C as c}from"./Col-CeeRnQxB.js";import{B as M}from"./Button-DEBuu1m2.js";import{C as V}from"./ClientTable-CL6XX6Gc.js";import{P as z}from"./PageLayout-Cd-4jQXh.js";import{C as A}from"./Card-Cmn7cKYw.js";import"./Form-CTfXWlVo.js";import"./ElementChildren-DaDnB9c6.js";import"./InputGroupContext-C-h8jlw8.js";import"./setPrototypeOf-DgZC2w_0.js";import"./warning-BsyeZTUT.js";import"./listen-DOhMskc_.js";import"./useCallbackRef-C_9nMhi0.js";import"./useEventCallback-s6m76CRA.js";import"./useMergedRefs-B_kWwTNW.js";import"./hasClass-CJ0GaH7t.js";import"./useWindow-m91wy-Xa.js";import"./NoopTransition-DmAqiXSQ.js";import"./TransitionWrapper-Cb4OEx4M.js";import"./objectWithoutPropertiesLoose-CAYKN5F1.js";import"./AbstractModalHeader-fWu4g0rU.js";import"./contains-xpjwsOxO.js";import"./usePrevious-gswdWBZu.js";import"./DataKey-COGXBUcQ.js";import"./CloseButton-BKCUVlX4.js";import"./Fade-Do2bjijw.js";import"./divWithClassName-B4nvZjDC.js";import"./Button-DEBg3Qkk.js";import"./simplebar-react.esm-Cne10Fc6.js";import"./index-DERQo0GJ.js";const D=({show:a,onHide:s,data:t})=>{const{tenantsStore:r}=w(),{updateTenant:n,loading:d}=r,p=x.useMemo(()=>({id:t.id,name:t.name,isActive:t.isActive,createdOn:t.createdOn}),[t]),l=K({name:o().required("Tenant name is required"),id:o().default(t.id),isActive:I().default(t.isActive),createdOn:o().default(t.createdOn)}),{reset:i,register:j,handleSubmit:y,formState:{isDirty:S,isValid:f,isSubmitting:g}}=L({defaultValues:p,resolver:R(l)}),v=()=>{i(),s()},T=async u=>{try{await n(u),s(),i(),b.info("Tenant Edited Successfully")}catch(h){const F=h==null?void 0:h.message;b.error(F)}};return e.jsxs(N,{show:a,onHide:v,size:"lg",centered:!0,children:[e.jsx(N.Header,{closeButton:!0,children:e.jsx("h2",{className:"mb-2 fs-3",children:"Edit Tenant"})}),e.jsx(N.Body,{children:e.jsxs("form",{onSubmit:y(T),children:[e.jsxs(B,{className:"mt-1",children:[e.jsx(c,{className:"mt-2",xs:7,children:e.jsx(m,{type:"text",placeholder:"Name",label:"Name",register:j,name:"name"})}),e.jsx(c,{className:"mt-2",xs:7,children:e.jsx(m,{type:"checkbox",label:"Is Active",register:j,name:"isActive"})})]}),e.jsxs("div",{className:"d-flex justify-content-end mt-3 gap-2",children:[e.jsx(M,{variant:"light",onClick:s,children:"Cancel"}),e.jsx(k,{type:"submit",variant:"primary",disabled:!S||!f||g,loading:g||d,children:"Save"})]})]})})]})},Y=C(D),E=[{header:"Key",accessorKey:"id",enableSorting:!0,cell:({row:a})=>{const{id:s}=a.original;return e.jsx("div",{className:"table-profile-component",children:e.jsx("strong",{children:s})})}},{header:"Name",enableSorting:!0,accessorKey:"name"},{header:"Active",enableSorting:!0,accessorKey:"isActive",enableGlobalFilter:!1,cell:({getValue:a})=>{var s,t;return e.jsx("strong",{className:P(((s=a())==null?void 0:s.toString().toLowerCase())==="true"?"text-success":"text-danger","text-capitalize"),children:((t=a())==null?void 0:t.toString())=="true"?"Yes":"No"})}},{header:"",accessorKey:"edit",cell:({row:a})=>{const{id:s}=a.original,{show:t,onShow:r,onHide:n}=q();return e.jsxs(e.Fragment,{children:[s!="root"?e.jsx("button",{className:"btn btn-soft-primary rounded-pill",onClick:r,children:"Edit"}):"N/A(You)",t&&e.jsx(Y,{show:t,onHide:n,data:a.original})]})}}],G=({show:a,onHide:s})=>{const{tenantsStore:t}=w(),{createTenant:r,loading:n}=t,d=x.useMemo(()=>({id:"",name:"",adminEmail:"",password:"Password123!"}),[]),p=K({id:o().required("The key is required"),name:o().required("Tenant name is required"),adminEmail:o().required("The admin email is required").email(),password:o().required("The password is required")}),{reset:l,register:i,handleSubmit:j,formState:{isDirty:y,isValid:S,isSubmitting:f}}=L({defaultValues:d,resolver:R(p)}),g=()=>{l(),s()},v=async T=>{try{await r(T),l(),s(),b.success("Tenant created successfully")}catch(u){const h=u==null?void 0:u.message;b.error(h)}};return e.jsx($,{show:a,onHide:g,headerTitle:"Add Tenant",children:e.jsxs("form",{onSubmit:j(v),children:[e.jsxs(B,{className:"mt-2",children:[e.jsx(c,{className:"mt-2",xs:6,children:e.jsx(m,{type:"text",placeholder:"Key",label:"Tenant Key",register:i,name:"id"})}),e.jsx(c,{className:"mt-2",xs:6,children:e.jsx(m,{type:"text",placeholder:"Name",label:"Name",register:i,name:"name"})}),e.jsx(c,{className:"mt-2",xs:6,children:e.jsx(m,{type:"text",placeholder:"admin@email.com",label:"Admin Email",register:i,name:"adminEmail"})}),e.jsx(c,{className:"mt-2",xs:6,children:e.jsx(m,{type:"text",placeholder:"Password",label:"Password",register:i,name:"password"})})]}),e.jsxs("div",{className:"d-flex justify-content-end mt-4 gap-2",children:[e.jsx(M,{variant:"light",onClick:s,children:"Cancel"}),e.jsx(k,{type:"submit",variant:"primary",disabled:!y||!S||f,loading:f||n,children:"Save"})]})]})})},H=C(G),Q=()=>{const{tenantsStore:a}=w(),{loadTenants:s,tenantsSorted:t,loadingInitial:r}=a,{show:n,onShow:d,onHide:p}=q(),l=x.useMemo(()=>t,[t]),i=x.useMemo(()=>E,[E]);return x.useEffect(()=>{s()},[s]),e.jsxs(z,{title:"Tenants",action:e.jsx(M,{variant:"primary",onClick:d,children:"Add Tenant"}),children:[e.jsx(H,{show:n,onHide:p}),e.jsx(A,{className:"pt-2",children:e.jsx(A.Body,{children:e.jsx(V,{data:l,columns:i,getCoreRowModel:O(),isLoading:r,filterFieldPlaceholder:"Search tenants..."})})}),e.jsx("div",{className:"mb-2",children:e.jsx("small",{children:"Client-side pagination with sorting & filtering"})})]})},ke=C(Q);export{ke as default};
