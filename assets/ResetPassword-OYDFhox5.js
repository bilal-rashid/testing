import{o as k,a as C,r as o,j as e,L as v,Q as d}from"./index-F0uvlsHd.js";import{o as q}from"./yup-T7nDE8GX.js";import{c as E,a as r}from"./object-DkfBSX30.js";import{u as L}from"./index.esm-D7_iMr1k.js";import{A as T}from"./AccountLayout-D6hF36BU.js";import{F as a}from"./FormInput-BqRBY1DN.js";import"./world-J20cQgd_.js";import{c as B}from"./checkPasswordStrength-BI5JvUYW.js";import{P as R}from"./ProgressBar-DZZJPJZT.js";import{B as F}from"./Button-DEBuu1m2.js";import"./Form-CTfXWlVo.js";import"./ElementChildren-DaDnB9c6.js";import"./Col-CeeRnQxB.js";import"./InputGroupContext-C-h8jlw8.js";import"./useAccountLayout-BoYHr4O6.js";import"./credentialing_logo-CwyIIjEL.js";import"./Card-Cmn7cKYw.js";import"./divWithClassName-B4nvZjDC.js";import"./setPrototypeOf-DgZC2w_0.js";import"./warning-BsyeZTUT.js";import"./clsx-B-dksMZM.js";import"./Button-DEBg3Qkk.js";const A=()=>e.jsx("footer",{className:"footer footer-alt",children:e.jsx("small",{className:"text-muted",children:e.jsx(v,{to:"/login",className:"text-muted ms-1",children:"Return to Login"})})}),V=()=>{const{accountStore:c,tenantsStore:p}=C(),{loadTenants:m,tenantsSorted:u,loading:h}=p,[w,x]=o.useState(0),f={email:"demo@example.com",token:"",password:"",confirmPassword:"",tenant:"root"},b=E({email:r().email("Must be a valid email").max(255).required("Email is required"),token:r().required("Token is required!"),password:r().required("New password is required!"),confirmPassword:r().required("Confirm new password is required!"),tenant:r().required("Tenant key is required")}),j=L({defaultValues:f,resolver:q(b)}),{handleSubmit:P,register:t,control:g,formState:{errors:y},watch:N}=j,i=N("password"),S=async s=>{const n=await c.forgotPassword(s);(n==null?void 0:n.succeeded)===!0?d.success("Password reset email sent"):d.error("Could not send email")},l=o.useCallback(()=>{const s=B(i,{checkFor:["length","lowerCase","upperCase","number","specialCharacter"]}).strength;x(s)},[i]);return o.useEffect(()=>{l()},[l]),o.useEffect(()=>{m()},[m]),e.jsx(T,{bottomLinks:e.jsx(A,{}),children:e.jsxs("div",{className:"my-auto",children:[e.jsx("h4",{className:"mt-0",children:"Reset Password"}),e.jsx("p",{className:"text-muted mb-4",children:"Enter your email with new password and reset token to regain access to your account."}),e.jsxs("form",{onSubmit:P(S),noValidate:!0,children:[e.jsx(a,{label:"Email",type:"text",placeholder:"name@example.com",containerClass:"mb-3",register:t,name:"email"}),e.jsxs("div",{className:"mb-3",children:[e.jsx(a,{label:"Password",type:"password",placeholder:"Password",register:t,name:"password"}),e.jsx(R,{now:w,className:"progress-sm mt-1"})]}),e.jsx(a,{label:"Confirm Password",type:"password",placeholder:"Password",containerClass:"mb-3",register:t,name:"confirmPassword"}),e.jsx(a,{label:"Token",type:"text",placeholder:"Enter token from Email",containerClass:"mb-3",register:t,name:"token"}),e.jsx("div",{className:"d-grid mb-0 text-center",children:e.jsx(F,{variant:"primary",type:"submit",disabled:h,children:"Submit"})}),e.jsxs("div",{className:"mt-3",children:[e.jsx("small",{className:"d-sm-flex d-none",children:"Specify the tenant with the dropdown. The Nano Boilerplate can resolve tenants by subdomain in real deployments."}),e.jsx(a,{type:"select",label:"Tenant",name:"tenant",containerClass:"mt-1 w-50",register:t,errors:y,control:g,children:u.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))},"className")]})]})]})})},oe=k(V);export{oe as default};
